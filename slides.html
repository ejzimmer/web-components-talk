<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="reveal/reveal.css">
		<link rel="stylesheet" href="zenburn.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro"> 
    <link rel="stylesheet" href="shared.css">
    <link rel="stylesheet" href="slides.css">
    
    <script src="reveal/reveal.js"></script>
			
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <img src="images/web-components-logo.svg" style="width: 50%; margin: auto" />
          <h1 class="overlay-text" style="top: calc(50% - 1.75em); text-shadow: var(--text-shadow)">Web Components</h1>
          <div class="overlay-text" style="top: calc(50%); text-shadow: var(--text-shadow); color: hsl(198, 76%, 80%)">It's about time.</div>
          <div class="notes">
            First proposed by Alex Russell at Fronteers conf 2011 as a way to create new HTML elements that are custom, reusable and encapsulated
          </div>
        </section>
        <section class="vertical">
          <img src="images/proposal-video.png" class="border" style="margin: auto; width: 100%" />
          <a style="font-size: .4em; position: relative; color: var(--green); bottom: 3.5em" 
            href="https://fronteers.nl/congres/2011/sessions/web-components-and-model-driven-views-alex-russell">
            https://fronteers.nl/congres/2011/sessions/web-components-and-model-driven-views-alex-russell
          </a>
          <div class="notes">
            - Chrome loved them, but nobody else really got on board
            - To this day, Chrome is only browser to implement full original spec
          </div>
        </section>
        <section class="vertical">
          <img src="images/polymer-logo.png" style="margin: auto; margin-bottom: 50px;" />
          <div>polymer</div>
          <div class="notes">
            - created by Chrome
            - cross-browser web components
            - most popular web components around (based on Google results when researching this article), but still not hugely popular
          </div>
        </section>
        <section class="vertical">
          <img src="images/jQuery-Logo_On_Dark.svg" style="margin: auto" />
          <div class="notes">
            devs didn't care
            we were all busy writing jquery plugins. components weren't even a thing.
            it's not 2011 anymore though, and a few things have changed
          </div>
        </section>
        <section class="framework-logos">
          <img src="images/angular-logo.png" />
          <img src="images/react-logo.png" />
          <img src="images/vue-logo.png" />
          <div class="notes">
            jquery replaced by frameworks
            and what do we build framework-based apps out of? components
            seeing components in the wild = inspiration for spec writers and implementers
            new, improved web components spec
          </div>
        </section>
        <section>
          <img src="images/browser-support.png" class="border" style="align-self: center">
          <div class="notes">
            supported by all but Edge
            Edge is working to support
            no, IE doesn't support any of this, of course
            polyfills - fiddly - just like everything else in IE
          </div>
        </section>
        <section>
          <img src="images/ie-pony.gif" />
        </section>
        <section data-background-image="images/batman-vs-superman.jpg">
          <div class="notes">
            frameworks: easy creation of components & component based architectures
            do we really need web components
            who would win in a fight?
          </div>
        </section>
        <section>
          <ul style="position: absolute; left: 20px">
            <li class="fragment fade-right">Automatic change detection</li>
            <li class="fragment fade-right">Binding</li>
            <li class="fragment fade-right">State management</li>
            <li class="fragment fade-right">Routing</li>
          </ul>
          <img src="images/superman.png" style="position: absolute; z-index: -1; right: 0; max-height: 80%" />
          <div class="notes">
            bunch of stuff frameworks give you that web components don't
            could implement with web components, but then you're just building a framework based on web components
          </div>
        </section>
        <section>
          Intercomponent communication
          <div class="notes">
            web components can do parent -> child & broadcast publish/subscribe
            frameworks tend to do better child -> parent and sibling -> sibling (or between unrelated parts of the app)
          </div>
        </section>
        <section data-background-image="images/contortionist.jpg">
          <div class="notes">
            strength of web components = flexibility
            use them on their own with just a script tag
            combine with framework
          </div>
        </section>
        <section>
          <iframe style="width: 100%; height: 600px" src="https://custom-elements-everywhere.com"></iframe>
          <div class="notes">
            indication of how well your framework works with web components
            React: intercomponent communication - stringifying attributes + react's event system
            open issues to fix
          </div>
        </section>
        <section>
          <img src="images/BatmanDCAU.png" style="position: absolute; left: -200px; z-index: -1; height: 700px; top: 10px" />
          <div class="twoby-grid">
            <div><img src="images/wordpress-logo.png" /></div>
            <div><img src="images/drupal-logo.png" /></div>
            <div style="padding: 20px"><img src="images/joomla-logo.png" /></div>
            <div><img src="images/aem-logo.png" /></div>
          </div>
          <div class="notes">
            not just frameworks
            share components between app and static site
          </div>
        </section>
        <section data-background-image="images/batman-and-superman.jpeg">
          <div class="notes">Why not both?</div>
          <div class="attribution">@richsimmonsart</div>
        </section>

        <section data-state="specs-list">
          <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
            <defs>
              <g id="template">
                <path d="M6.408 7.924v4.125l3.572 2.062 3.572-2.062V7.924L9.98 5.862zM22.838 17.07h-8.895l4.447-7.701z"></path>
                <path d="M24.221 3.307l1.139 1.139v14.223l-1.139 1.139H4.498l-1.139-1.139V4.446l1.139-1.139h19.723zm1.138-2.75h-22l-2.75 2.75v16.5l2.75 2.75h22l2.75-2.75v-16.5l-2.75-2.75z"></path>
              </g>
              <path id="element" d="M6.35 0L0 11l6.35 11h12.702l6.35-11-6.35-11H6.35zm0 11l3.175-5.5h6.352l3.175 5.5-3.175 5.5H9.525L6.35 11z"></path>
              <g id="shadow">
                <path d="M11.215 8.135h3.14l.883-1.535h-5.06L7.637 11l2.54 4.4h.003l.883-1.536-1.575-2.76z"></path>
                <path d="M7.36 20.254l-5.204-9.016 5.408-9.371h10.4L15.24 6.6l2.541 4.4-2.54 4.4h-5.08l-2.802 4.854zM19.05 0H6.35L0 11l6.35 11h12.7l6.352-11L19.05 0z"></path>
              </g>
              <path id="import" d="M13.466 0L4 5.466V16.534L13.467 22l9.466-5.466V5.466L13.466 0zM7.569 13.201h3.294V6.133l2.603-1.638h.001l2.603 1.638v7.068h3.294l-5.897 4.578-5.898-4.578z"></path>
            </defs>
          </svg>
          <ul class="specs-list">
            <li>
              <svg viewBox="0 0 30 22"><use xlink:href="#import"></use></svg>
              <span>ES modules</span>
            </li>
            <li>
              <svg viewBox="0 0 30 22"><use xlink:href="#template"></use></svg>
              <span>HTML templates</span>
            </li>
            <li>
              <svg viewBox="0 0 30 22"><use xlink:href="#element"></use></svg>
              <span>Custom elements</span>
            </li>
            <li>
              <svg viewBox="0 0 30 22"><use xlink:href="#shadow"></use></svg>
              <span>Shadow DOM</span>
            </li>
          </ul>
          <div class="notes">
            Not going to talk about ES imports as I assume you know how they work already
            Also not going to talk about HTML templates - not really useful without HTML imports
            You will see templates and HTML imports used with Polymer components & other components built on libraries and polyfills
          </div>
          <script>
            Reveal.addEventListener('specs-list', () => {
              let index = 0;
              const nextSpec = (event) => {
                if (event.key === 'ArrowRight') {
                  event.stopPropagation();
                  index++;
                  highlightItem();
                }

                if (index === 3) {
                  document.body.removeEventListener('keydown', nextSpec);
                }
              }
              const highlightItem = () => {
                if (index > 1) {
                  const previousElement = document.querySelector(`ul.specs-list li:nth-child(${index - 1})`);
                  previousElement.classList.remove('highlighted');
                  previousElement.classList.add('done');
                }

                if (index < 3) {
                  const element = document.querySelector(`ul.specs-list li:nth-child(${index})`);
                  element.classList.add('highlighted');
                }

              }
              document.body.addEventListener('keydown', nextSpec);
            });
          </script>
        </section>
        <section>
          <ul>
            <li>Custom elements</li>
            <li>Shadow DOM</li>
          </ul>
        </section>
        <section class="vertical">
          <img src="images/custom-elements.svg" style="flex-grow: 1" />
          <h2>Custom Elements</h2>
        </section>
        <section>
          <ul>
            <li>Register new HTML tags</li>
            <li>Control life cycle and behaviour</li>
          </ul>
          <div class="notes">
            Not content
            Limited presentation - you can set style on element but that's it - there are better ways to do this
          </div>
        </section>
        <section>
          <pre style="align-self: center"><code>customElements.define('my-element', MyElement)</code></pre>
          <div class="notes">
            customElements is available on window object in browsers that support it
            first argument is name - must have hyphen
            tag names are global - use namespacing if you're worrid about clashes
          </div>
        </section>
        <section class="vertical">
            <pre style="align-self: center"><code>class MyElement extends HTMLElement {
 constructor() {
  super();
 }

 connectedCallback() { ... }

 disconnectedCallback() { ... }

 adoptedCallback() { ... }

 attributeChangedCallback() { ... } 
}</code></pre>
            <div class="notes">
              must extend HTMLElement or child class
              must call super
              may implement any of four lifecycle hooks
            </div>
          </section>
          <section>
            <h2 style="font-size: 1.4em">Expanding bubble demo!</h2>
          </section>
          <section>
            <style>
              expanding-bubble {
                border: 4px solid var(--green);
                border-radius: 50%;
                margin: auto;
              }
            </style>
            <script>
              class BubbleElement extends HTMLElement {
                constructor() {
                  super();
        
        
                  this.onclick = this.grow;
                }
        
                grow() {
                  const diameter = this.getBoundingClientRect().width;
                  const newDiameter = diameter * 1.1;
                  this.style.width = `${newDiameter}px`;
                  this.style.height = `${newDiameter}px`;
                }
              }
              customElements.define('expanding-bubble', BubbleElement);
            </script>
            <expanding-bubble></expanding-bubble>  
            <div class="notes">
              limited by custom elements can't have children - no innerHTML, no appendChild
            </div>
          </section>

          <section class="vertical">
            <img src="images/shadow-dom.svg" style="flex-grow: 1" />
            <h2>Shadow DOM</h2>
            <div class="notes">
              DOM fragment completely quarantined from the main DOM
            </div>
          </section>
          <section data-background-image="images/dark-vs-light.jpg">
            <div class="notes">
                shadow DOM vs light DOM<
                browsers have had shadow DOM for years
                probably used it without realisng 
              </div>
          </section>
          <section class="vertical">
            <input type="file" />
            <input type="range" />
            <select>
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </select>
            <video controls class="abc-tv hover-highlight" style="height: 400px; width: 600px; align-self: center"></video> 
            <div class="notes">
              elements that are clearly made of multiple parts, but appear as single element in DOM = shadow DOM
              usually real bastards to style
              check it out in Chrome
              Show user agent shadow DOM setting in dev tools
              shadow root - special element
              create new style - won't apply to shadow root 
              can't target it with JS
              Shadow DOM spec is basically giving this ability to developers
            </div>
          </section>
          <section>
            <pre><code>myElement.attachShadow({ mode: 'open' });
shadowRoot.innerHTML = `
  <style>
    .inner {
      border: 12px solid var(--mid-blue);
      width: 100px;
      height: 100px;
      margin: auto;
    }
  </style>
  <div class="inner"></div>
`;</code></pre>
            <div class="notes">
              mode - open vs closed
              attach children via innerHTML or append child
            </div>
          </section>
          <section>
            <style>
              #myElement {
                margin: auto;
                background-color: var(--green);
                width: 200px;
                height: 200px;
                display: flex;
              }
            </style>
            <div id="myElement"></div>
            <script>
              const shadowRoot = myElement.attachShadow({ mode: 'open' });
              shadowRoot.innerHTML = `
                <style>
                  .inner {
                    border: 12px solid var(--mid-blue);
                    width: 100px;
                    height: 100px;
                    margin: auto;
                  }
                </style>
                <div class="inner"></div>
              `;
            </script>
            <div class="notes">
              - can see shadow root in dev tools
              - can't affect inner element with new css class (although custom property works)
              - can access inner element via JS
            </div>
          </section>
          <section>
            <img src="images/shadow-dom.svg" style="flex-grow: 1" />
            <ul>
              <li>Impervious to CSS</li>
              <li>Semi-impervious to JS</li>
              <li>Vulnerable to dev tools</li>
            </ul>
          </section>
    
          <section>
            <h2>Putting it together</h2>
            <div class="class">
              shadow DOM allows custom elements to have children
              the excite
            </div>
          </section>
          <section>
            <style>
              emoji-picker {
                margin: auto;
              }
            </style>
            <emoji-picker></emoji-picker>
          </section>

          <section>
            <h2 style="font-size: 1.3em;">Piercing the shadow DOM</h2>
            <div class="notes">
              encapsulation is great, but sometimes you really need to pass something in
            </div>
          </section>
          <section>
            <pre><code class="html"><my-awesome-value option="3"></my-awesome-value></code></pre>
            <div class="notes">
              the simplest way to pass things through the shadow DOM is via attributes on your custom element
              unlike framework components - can only pass strings - no reason you can't stringify object
              framework will take care of stringification I think
            </div>
          </section>
          <section>
            <pre><code class="js">const option = this.attributes.option.value</code></pre>
            <div class="notes">
              the more complicated way is to pass chunks of light DOM
            </div>
          </section>
          <section>
            <style>
              select {
                margin: auto;
                transform: scale(4);
              }
            </style>
            <select>
              <option>Option 1</option>
              <option>Option 2</option>
            </select>
            <div class="notes">
              select = shadow root
              options exist light DOM
              select has slot for options
            </div>
          </section>
          <section>
            <style>
              twoot-post a {
                color: var(--green);
              }
            </style>
            <twoot-post avatar="images/bowser-avatar.png">
              Hey Mario, the princess is in 
              <a href="https://goo.gl/maps/cZzyjm8LMrF2">another castle</a>
            </twoot-post> 
            <div class="notes">the next big thing after Google plus</div>
          </section>
    
 
 
 
 
    
 
        <section>
            So that’s a basic overview of web components. There’s a whole lot going on that we didn’t cover here - things like libraries to help you build components, polyfills to support … well.. IE, really, the component lifecycle and communicating between components. Hopefully though, I’ve shown you how easy it is to create web components, and convinced you that perhaps frameworks and web components working together is the way of the future!
        </section>








  





  



        <section>
          thanks, twitter, shine, slides
        </section>
      </div>
    </div>
    <script src="reveal/head.min.js"></script>
    <script>
      Reveal.initialize({
        controls: false,
        progress: false,
        history: true,
        center: false,
        display: 'flex',
        dependencies: [
          { src: 'reveal/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        ]
      });
    </script>
    <script src="emoji-picker.js"></script>
    <script src="twoot-post.js"></script>
  </body>
</html>
      